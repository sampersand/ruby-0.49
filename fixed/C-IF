.\" C-IF -  -*- Text -*- created at: Tue Oct 12 14:15:00 JST 1993

Ruby-C Interface

VALUE

 Type representing a Ruby object. Cast as necessary when using it.

Qnil

 Constant: the nil object

Qself

 Variable: the value of the current self object. When changing the value
 of this variable, the value of self itself will change thereafter, so
 do it carefully.

VALUE rb_define_class(char *name, VALUE super)

 Define a Ruby class.

VALUE rb_define_module(char *name)

 Define a Ruby module.

rb_include_module(VALUE class, VALUE module)

 Include a module. If class has already included module, do nothing
 (prevents multiple inclusion).

void rb_define_variable(char *name, VALUE *var,
			VALUE (*get_hook), VALUE (*set+hook)())

 Define a global variable shared between Ruby and C. All global variables
 that refer to Ruby objects must be defined with this function (to
 protect them from GC). When get_hook is not Qnil, the function set in
 get_hook is called when the variable is referenced. When set_hook is
 not Qnil, it is called when the variable is assigned.

 When the variable name does not start with `$', it is automatically
 added. If the variable name contains characters not allowed in Ruby
 identifiers (for example ` '), it becomes inaccessible from Ruby
 programs.

void rb_global_variable(VALUE *var)

 Mark a global variable containing Ruby objects for GC even though it is
 not accessed from Ruby.

void rb_read_only_hook()

 set_hook function for read-only variables.

rb_define_method(VALUE class, char *name, VALUE (*func)(), int argc)

 Define a method. When argc is -1, arguments are given in argc, argv
 form.

rb_define_single_method(VALUE class, char *name, VALUE (*func)(), int argc)

 Define a singleton method. Arguments are the same as for
 rb_define_method().

ID rb_intern(char *name)

 Return the ID corresponding to a string.

char *rb_id2name(ID id)

  Return the string corresponding to an ID (for debugging).

VALUE rb_funcall(VALUE recv, ID mid, int narg, ...)

 Method call. To obtain mid from a string, use rb_intern().

rb_iv_get(VALUE obj, char *name)

 Get an instance variable of obj. Instance variables not starting with
 @ cannot be accessed from Ruby programs.

rb_iv_set(VALUE obj, char *name, VALUE val)

 Set the instance variable of obj to val.

rb_call_super(VALUE args)

 Call the method of the superclass. args is an array forming the argument
 list. When args is Qnil, arguments are inherited as-is.

rb_iterate(VALUE (*func1)(), char *arg1, VALUE (*func2)(), char *arg2)

 Set func2 as the block and call func1 as the iterator. arg1 is passed
 as the argument to func1, and func2 receives as its first argument the
 value given by the iterator, and as its second argument arg2.

rb_yield(VALUE val)

 Call the iterator block with val as the value.

rb_resque(VALUE (*func1)(), char *arg1, VALUE (*func2)(), char *arg2)

 Call function func1 with arg1 as its argument. If an exception occurs
 during execution of func1, func2 is called with arg2 as its argument.
 The return value is func1's return value when no exception occurs, and
 func2's return value when an exception does occur.

rb_ensure(VALUE (*func1)(), char *arg1, VALUE (*func2)(), char *arg2)

 Execute function func1 with arg1 as its argument, and after execution
 (even if an exception occurs), execute func2 with arg2 as its argument.
 The return value is func1's return value (nil if an exception occurs).

GC_LINK

 Declaration for GC protection of local variables.

GC_PRO(var)

 Protect a local variable from GC. When a local variable may be pointing
 to a Ruby object that is not protected, it must be protected using
 GC_PRO(). A variable protected by GC_PRO() must be initialized (if it
 contains uninitialized garbage, GC will crash).

GC_PRO2(var)

 GC protection; same as GC_PRO(var) except that var is initialized to
 nil.

GC_PRO2(var, init)

 GC protection; same as GC_PRO(var) except that var is initialized to
 init.

GC_UNLINK

 Declaration for ending GC protection.

/*
 * Local variables:
 * fill-column: 70
 * end:
 */
